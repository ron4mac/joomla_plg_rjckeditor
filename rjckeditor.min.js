CKEDITOR.on("dialogDefinition",function(e){var f=e.data.name;console.log(f);var m=e.data.definition;console.log(m);if("image"==f){var g=function(c){if(!l){l=1;var b=this.getDialog(),a=b.imageElement;if(a){this.commit(1,a);c=[].concat(c);for(var d=c.length,f,e=0;e<d;e++)(f=b.getContentElement.apply(b,c[e].split(":")))&&f.setup(1,a)}l=0}};f=m.getContents("info");f.remove("txtHSpace");f.remove("txtVSpace");var h=/^\d+px$/,k=function(c){if(!c.originalElement||!c.preview)return 1;c.commitContent(4,c.preview);
return 0},l;f.add({type:"fieldset",label:"&nbsp;Margins&nbsp;",children:[{type:"vbox",padding:1,width:"100px",label:"Margins",align:"center",children:[{type:"text",id:"txtMarginTop",width:"40px",labelLayout:"horizontal",label:"Top","default":"",onKeyUp:function(){k(this.getDialog())},onChange:function(){g.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(e.editor.lang.image.validateVSpace),setup:function(c,b){if(1==c){var a=(a=b.getStyle("margin-top"))&&a.match(h);a=
parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("vspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);1==c||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-top"):b.setStyle("margin-top",CKEDITOR.tools.cssLength(d)),a||1!=c||b.removeAttribute("vspace")):8==c&&(b.removeAttribute("vspace"),b.removeStyle("margin-top"))}},{type:"text",id:"txtMarginRight",width:"40px",labelLayout:"horizontal",label:"Right","default":"",onKeyUp:function(){k(this.getDialog())},
onChange:function(){g.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(e.editor.lang.image.validateHSpace),setup:function(c,b){if(1==c){var a=(a=b.getStyle("margin-right"))&&a.match(h);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("hspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);1==c||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-right"):b.setStyle("margin-right",CKEDITOR.tools.cssLength(d)),a||1!=c||b.removeAttribute("hspace")):
8==c&&(b.removeAttribute("hspace"),b.removeStyle("margin-right"))}},{type:"text",id:"txtMarginBottom",width:"40px",labelLayout:"horizontal",label:"Bottom","default":"",onKeyUp:function(){k(this.getDialog())},onChange:function(){g.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(e.editor.lang.image.validateVSpace),setup:function(c,b){if(1==c){var a=(a=b.getStyle("margin-bottom"))&&a.match(h);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("vspace"));this.setValue(a)}},
commit:function(c,b,a){var d=parseInt(this.getValue(),10);1==c||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-bottom"):b.setStyle("margin-bottom",CKEDITOR.tools.cssLength(d)),a||1!=c||b.removeAttribute("vspace")):8==c&&(b.removeAttribute("vspace"),b.removeStyle("margin-bottom"))}},{type:"text",id:"txtMarginLeft",width:"40px",labelLayout:"horizontal",label:"Left","default":"",onKeyUp:function(){k(this.getDialog())},onChange:function(){g.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(e.editor.lang.image.validateHSpace),
setup:function(c,b){if(1==c){var a=(a=b.getStyle("margin-left"))&&a.match(h);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("hspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);1==c||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-left"):b.setStyle("margin-left",CKEDITOR.tools.cssLength(d)),a||1!=c||b.removeAttribute("hspace")):8==c&&(b.removeAttribute("hspace"),b.removeStyle("margin-left"))}}]}]},"txtBorder");f.get("txtBorder")["default"]=
"0"}});