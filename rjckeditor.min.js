(function(p){CKEDITOR.on("dialogDefinition",function(f){var g=f.data.name;console.log(g);var n=f.data.definition;console.log(n);if("image"==g){var h=function(c){if(!m){m=1;var b=this.getDialog(),a=b.imageElement;if(a){this.commit(e,a);c=[].concat(c);for(var d=c.length,g,f=0;f<d;f++)(g=b.getContentElement.apply(b,c[f].split(":")))&&g.setup(e,a)}m=0}},g=n.getContents("info");g.remove("txtHSpace");g.remove("txtVSpace");var e=1,k=/^\d+px$/,l=function(c){if(!c.originalElement||!c.preview)return 1;c.commitContent(4,
c.preview);return 0},m;g.add({type:"fieldset",label:"&nbsp;Margins&nbsp;",children:[{type:"vbox",padding:1,width:"100px",label:"Margins",align:"center",children:[{type:"text",id:"txtMarginTop",width:"40px",labelLayout:"horizontal",label:"Top","default":"",onKeyUp:function(){l(this.getDialog())},onChange:function(){h.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(f.editor.lang.image.validateVSpace),setup:function(c,b){if(c==e){var a;a=(a=b.getStyle("margin-top"))&&
a.match(k);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("vspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);c==e||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-top"):b.setStyle("margin-top",CKEDITOR.tools.cssLength(d)),a||c!=e||b.removeAttribute("vspace")):8==c&&(b.removeAttribute("vspace"),b.removeStyle("margin-top"))}},{type:"text",id:"txtMarginRight",width:"40px",labelLayout:"horizontal",label:"Right","default":"",onKeyUp:function(){l(this.getDialog())},
onChange:function(){h.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(f.editor.lang.image.validateHSpace),setup:function(c,b){if(c==e){var a;a=(a=b.getStyle("margin-right"))&&a.match(k);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("hspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);c==e||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-right"):b.setStyle("margin-right",CKEDITOR.tools.cssLength(d)),a||c!=e||
b.removeAttribute("hspace")):8==c&&(b.removeAttribute("hspace"),b.removeStyle("margin-right"))}},{type:"text",id:"txtMarginBottom",width:"40px",labelLayout:"horizontal",label:"Bottom","default":"",onKeyUp:function(){l(this.getDialog())},onChange:function(){h.call(this,"advanced:txtdlgGenStyle")},validate:CKEDITOR.dialog.validate.integer(f.editor.lang.image.validateVSpace),setup:function(c,b){if(c==e){var a;a=(a=b.getStyle("margin-bottom"))&&a.match(k);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("vspace"));
this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);c==e||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-bottom"):b.setStyle("margin-bottom",CKEDITOR.tools.cssLength(d)),a||c!=e||b.removeAttribute("vspace")):8==c&&(b.removeAttribute("vspace"),b.removeStyle("margin-bottom"))}},{type:"text",id:"txtMarginLeft",width:"40px",labelLayout:"horizontal",label:"Left","default":"",onKeyUp:function(){l(this.getDialog())},onChange:function(){h.call(this,"advanced:txtdlgGenStyle")},
validate:CKEDITOR.dialog.validate.integer(f.editor.lang.image.validateHSpace),setup:function(c,b){if(c==e){var a;a=(a=b.getStyle("margin-left"))&&a.match(k);a=parseInt(a,10);isNaN(parseInt(a,10))&&(a=b.getAttribute("hspace"));this.setValue(a)}},commit:function(c,b,a){var d=parseInt(this.getValue(),10);c==e||4==c?(isNaN(d)?!d&&this.isChanged()&&b.removeStyle("margin-left"):b.setStyle("margin-left",CKEDITOR.tools.cssLength(d)),a||c!=e||b.removeAttribute("hspace")):8==c&&(b.removeAttribute("hspace"),
b.removeStyle("margin-left"))}}]}]},"txtBorder");g.get("txtBorder")["default"]="0"}})})(jQuery);